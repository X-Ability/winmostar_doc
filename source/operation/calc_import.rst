
.. _calc_import_top:

基本的な操作の流れ
============================================

ここでは、Winmostarを用いて量子化学計算、分子動力学計算、あるいは第一原理計算を流す基本的な流れを紹介します。

   (1) 初期構造を作成

      :ref:`createsystem_top` の手順で、計算したい系を作成する。
      
   (2) 計算条件（キーワード）の設定
   
      各種ソルバのメニューから :guilabel:`キーワード設定` をクリックし（例えば :menuselection:`半経験QM --> MOPAC --> キーワード設定` ）、開いたウインドウ上で計算条件の設定を行う。
      
      いくつかのウインドウについては、キーワードの欄にポインタを重ねると、そのキーワードの意味が出現するので、それを参考にすることも可能である。


   (3) 計算の実行
   
      - WinmostarをインストールしたWindows PC上で計算を実行する場合（ **ローカルジョブ** ）
      
         - キーワード設定ウインドウが開いた状態で :guilabel:`Run` ボタンを押す
         - キーワード設定ウインドウは一旦 :guilabel:`OK` ボタンを押して閉じる。
           メインウインドウの :ref:`キーワード表示エリア <gui_main>` にキーワードが反映されるので、キーワードを直接編集したい場合は、この段階でキーワード表示エリアに入力するか、 :ref:`file_editor` から任意のテキストエディタ上で入力ファイルを編集する。
           その後、 各種ソルバのメニューから :guilabel:`実行` をクリックする（例えば :menuselection:`半経験QM --> Gromacs --> (1) MOP6W70実行` ）。

         :guilabel:`Run` または :guilabel:`実行` をクリックした後、入力ファイルが保存されていない場合は入力ファイルの名前を入力すると保存され、続けて :ref:`winmosjm_top` にジョブが登録される。
         
         :ref:`winmosjm_top` は登録されたジョブを順番に処理する。
         
      - WinmostarをインストールしたPCにネットワークで接続されたLinuxマシン上で実行する場合（ **リモートジョブ** ）
      
         キーワード設定ウインドウは一旦 :guilabel:`OK` ボタンを押して閉じる。
         メインウインドウの :ref:`キーワード表示エリア <gui_main>` にキーワードが反映されるので、キーワードを直接編集したい場合は、この段階でキーワード表示エリアに入力するか、 :ref:`file_editor` から任意のテキストエディタ上で入力ファイルを編集する。
         
         その後、 :menuselection:`ツール -->` :ref:`tools_remotejob` をクリックしサーバへの接続設定を行う。
         接続設定が終わったら、 :guilabel:`Submit Remoet Job` ウインドウ上の :guilabel:`Send & Submit` ボタンを押し、入力ファイルの保存、転送とリモートサーバでのジョブの登録（サブミット）を一度に行う。
         
         リモートサーバ上でジョブが終了したら :guilabel:`Get All Files` ボタンを押して、WinmostarをインストールしたWindows PC上に計算から出力されたファイルを転送する。
         
         詳細は :ref:`remote_top` を参照してください。

   (4) ログの確認
   
      各種ソルバのメニューから :guilabel:`ログを表示` を選択する。（例えば :menuselection:`半経験QM --> MOPAC --> ログを表示(out)` ）
      
      どのファイルを開くか聞かれるが、ログを確認したい計算の入力ファイルがメインウインドウに表示されている場合は、デフォルトで選択されるファイルを開けばよい。
      
      ログファイルがテキストエディタで表示されるので、ジョブが正常あるいは異常終了したか確認する。
      
   (5) 各種物理量の表示、解析
   
      ジョブが正常終了している場合は、各種ソルバのメニューから、表示したい物理量のメニューを選択する。（例えば :menuselection:`半経験QM --> MOPAC --> 分子軌道、電子密度` ）
      
      どのファイルを開くか聞かれるため、適宜選択する。
      場合によっては複数選択することもある。
      ログの確認時と同様、メインウインドウに表示されているファイルに紐づけられたものがデフォルトで選択される。
      
      ファイルを指定すると、結果表示用のウインドウが表示される。
      
      各種の分子形状の解析については、別途 :ref:`tools_top` 以下に機能が用意されている。
      
   (6) ジョブの延長、継続
      
      ジョブの延長や継続が必要な場合は、再度キーワード設定ウインドウを開き、ジョブを開始する。
      
         - MDについては、キーワード設定ウインドウで :guilabel:`Extending Simulation` にチェックを入れる。
         - Quantum ESPRESSOについては、キーワード設定ウインドウで :guilabel:`Output Direcotory` に :guilabel:`Continue` を指定する。
         - その他半経験QM、QMの場合は、例えば構造最適化計算の後は、一旦 :guilabel:`アニメーション` メニューから構造最適化の過程を可視化し、最終構造をメインウインドウに表示したうえで、継続ジョブのキーワード設定を行う。
      
