.. include:: ../common.rst

.. _tools_top:

ツールメニュー
============================================

環境設定
-------------------
   環境設定ウィンドウを開きます。
   詳細は :ref:`preferences_top` を参照してください。

フラグメントを登録/削除
-------------------------------------

フラグメントを登録
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   メインウィンドウに表示されている分子構造を部品として登録します。マーカー（太赤丸）の付いた原子が置換時に接続部分に設定されます。

フラグメントを削除
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  :ref:`ツールバー <gui_main>` の :guilabel:`フラグメントを選択` プルダウンメニュー |repl| で選ばれた部品の登録を削除します。

.. _tools_balloon:

配座探索(Balloon)
-------------------
   Balloonを用いて配座探索を行います。 :guilabel:`Search` ボタンをクリックすると処理が開始されます。
   :file:`*_balloon_tmp` という作業フォルダに中間ファイルが生成されます。
   
   .. warning::
      本機能は、結合次数に影響を受けます。

   

点群解析
-------------------
   モデリングした分子の点群対称性を判定します。 

   本機能は主に以下の目的で使用されます。
   
      (1) モデリングした分子の点群解析を行います。
      (2) 判定された点群情報を元に分子の構造の歪みを解消します。（対称化）
      (3) 対称単位⇔非対称単位の変換を行えます。

   金属を含まない有機分子であれば、一度クリーンを行った構造の方が点群解析が成功しやすくなります。

   以下の機能を用いて点群解析を解析し可視化します。

   Analyze
      点群解析を開始します。
   Accuracy
      点群解析の解析精度を指定します。精度を上げると対称性の判定が厳しくなり、下げると判定が甘くなります。
   Shoenflies
      分子の対称性をShoenflies記号で表示します。
      
      i
         点対称要素がリスト表示されます。
      Cn Axis
         回転対称要素がリスト表示されます。
      Sn Axis
         回映対称要素がリスト表示されます。
      Mirror
         鏡映対称要素がリスト表示されます。
   Select
         リストされている全て対称要素が選択されグラフィック画面に表示されます。
   Deselect
         リストされている全て対称要素の選択が解除されグラフィック画面で非表示になります。
   Select All
      全ての対称要素が選択されグラフィック画面に表示されます。
   Deselect All
      全て対称要素の選択が解除されグラフィック画面で非表示になります。

   点群解析終了後、以下の操作で分子構造の対称化と、非対称単位と対称単位の間の切り替えが可能になります。
   ただし、C1以外の点群対称性だった場合に限ります。

   Symmetrize
      予測された点群情報に基づき、構造の歪み（完全な対称構造からのずれ）を解消します。
   Show
      Symmetric Unitにチェックが入っていると対称単位を表示します。
      Asymmetric Unitにチェックが入っていると非対称単位のみを表示します。
      （非対称単位だけが表示された状態でGAMESSキーワード設定に進むと点群情報を引き継いでインプットを作成できます。）
   右下のテキストエリア
      分子の座標情報をXYZ形式で表示します。

分子表面積, 体積
-------------------

   分子表面積、体積、卵形度を計算します。

   分子の表面積と体積の計算には函館高専の長尾先生のプログラムを使用しています。（長尾輝夫, 分子表面積及び体積計算プログラムの改良, 函館工業高等専門学校紀要, 第27号, p111-120, 1993.）

   (1) van der Waals Moleuclar Surface (VMS): 原子をvan der Waals半径の球に置き換えた場合の表面
   (2) Accessible Molecular Surface: VMS表面の周りを溶媒分子でなぞった際の溶媒分子の中心の面
   (3) Molecular Surface: VMS表面の周りを溶媒分子でなぞった接触表面と凹角表面（Solvent-excluded surface、または、Connolly surfaceとも呼ばれる）

   卵形度（Ovality）は以下の式で計算しています。

   分子表面積/最小表面積 = S/4π(3V/4π)**(2/3)
   最小表面積 = 4π(3V/4π)**(2/3) (分子体積が等しい真球の表面積)


アスペクト比
-------------------
   分子のアスペクト比を計算します。アスペクト比は、分子が内接する最小直径の円筒の長さLと直径Dの比L/Dとして定義しています。


慣性半径
-------------------
   分子の慣性半径を計算します。

Sterimolパラメータ
-------------------
   メインウィンドウ上でグループ選択した部分構造に対して、Sterimolパラメータを計算します。 :guilabel:`Calculate` ボタンをクリックすると計算が開始されます。

プロジェクトブラウザ
------------------------
   プロジェクト内のファイルの管理を行うウィンドウを開きます。

ジョブマネージャ
-------------------
   ローカルジョブを管理するWinmostar Job Managerを起動します。

.. _tools_remotejob:

リモートジョブ投入
-------------------
   リモートジョブの実行、管理を行うウィンドウを開きます。詳細は :ref:`remote_submitjob` を参照してください。

Cygwin
-------------------
    :ref:`cygwinwm_top` の端末画面（ターミナル）を起動します。

単位を変換
-------------------
    原子・分子系に特化した単位の変換ツールを開きます。

文字列を検索
-------------------
   各種ログファイルの中で文字列を検索し、ヒットした行をExcelまたはテキストファイルに出力します。

batファイル連続実行
-----------------------
   GaussianとGAMESSのbatファイルを連続で実行します。

   1. まず、通常の操作方法でGaussianやGAMESSを実行します。実行中にコンソール画面（DOS画面）でエラーが出ていないことを確認してから、コンソール画面の×ボタンを押して処理を途中で強制終了します。
   2. 次に本機能を起動します。ウィンドウの左側のリストには1. で実行されたジョブのbatファイルが表示されます。 
   3. batファイルを選択して :guilabel:`=>` ボタンを押すと、ウィンドウの右側のリストに追加されます。 
   4. :guilabel:`Run` ボタンを押すと右側のリストに登録されたジョブの連続実行が始まります。 :guilabel:`Run at` ボタンを押すと、指定した時刻に連続実行が始まります。連続実行ジョブは、 :file:`winmos_batjob*.bat` に保存されます。 :guilabel:`Save` および :guilabel:`Load` ボタンを押すと設定の保存、読み込みができます。


分子の重ね合わせ表示
-------------------------

   複数の分子を重ね合わせて表示します。
   
   1. まず、:guilabel:`Add` ボタンでファイルを選択して、重ね合わせる分子を選択します。ファイルの種類はWinmostarで読み込める各種入力ファイルとMOPAC、GAMESS、NWChem、Gaussianの出力ファイルです。複数のファイルを同時に選択することもできます。ドラッグ＆ドロップでファイルを読み込ませることもできます。 :guilabel:`Import From Main Window` ボタンではメインウィンドウに表示されている分子を取り込むことができます。
   2. リストに表示されたファイル名を選択するとその分子が青くハイライトされます。 
   3. :guilabel:`Delete` ボタンで選択した分子を削除、 :guilabel:`Clear` ボタンで全ての分子を削除します。
   4.  :guilabel:`Align All` ボタンで各分子の配向を揃えることができます。それぞれの分子について3原子をクリックして指定すると、1点目を原点に、2点目をＸ軸上に、3点目をxy平面上に設定します。
   5. 分子の構造が近い場合は、 :guilabel:`X` , :guilabel:`Y` , :guilabel:`Z` ボタンを押して重ね合わせる面をずらします。
   6. :guilabel:`Open Viewer` ボタンを押すと、:ref:`winmos3d_top` で表示することができます。

.. _tools_composesdf:

複数ファイルをSDF形式に集約
------------------------------

   複数のファイルを1つのSDF形式のファイルに集約して保存します。
   選択されたフォルダの中に含まれる全てのファイルについて集約します。
   :ref:`file_open` で開くことができるファイルの以外は読み込まれません。（拡張子で判断されます）
   
   
